@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@400;500;600;700&family=MedievalSharp&family=Uncial+Antiqua&display=swap');

@import "tailwindcss";

/* ============================================
   Theme Tokens — ROK-224
   Semantic design tokens for theme support.
   Dark theme values defined here; ROK-124 will
   add [data-theme="light"] overrides.

   Mapping reference:
     bg-slate-950 → bg-backdrop
     bg-slate-900 → bg-surface
     bg-slate-800 → bg-panel
     bg-slate-700 → bg-overlay
     bg-slate-600 → bg-faint
     bg-slate-500 → bg-dim
     bg-slate-400 → bg-muted
     text-white   → text-foreground
     text-slate-300 → text-secondary
     text-slate-400 → text-muted
     text-slate-500 → text-dim
     text-slate-600 → text-faint
     border-slate-800 → border-edge-subtle
     border-slate-700 → border-edge
     border-slate-600 → border-edge-strong
     border-slate-500 → border-dim
     placeholder-slate-500 → placeholder-dim
     divide-slate-* → divide-edge
   ============================================ */

@theme {
    /* Surfaces — backgrounds */
    --color-backdrop: #020617;   /* slate-950 */
    --color-surface: #0f172a;    /* slate-900 */
    --color-panel: #1e293b;      /* slate-800 */
    --color-overlay: #334155;    /* slate-700 */

    /* Neutral scale — dual-purpose (text & bg) */
    --color-faint: #475569;      /* slate-600 */
    --color-dim: #64748b;        /* slate-500 */
    --color-muted: #94a3b8;      /* slate-400 */
    --color-secondary: #cbd5e1;  /* slate-300 */
    --color-foreground: #ffffff; /* white */

    /* Borders */
    --color-edge: #334155;       /* slate-700 */
    --color-edge-strong: #475569;/* slate-600 */
    --color-edge-subtle: #1e293b;/* slate-800 */
}

/* Game Time Grid inline-style tokens — dark defaults (ROK-124) */
html {
    --gt-widget-bg: rgba(30, 41, 59, 0.7);
    --gt-widget-border: rgba(51, 65, 85, 0.6);
    --gt-split-bg: rgba(30, 41, 59, 0.8);
    --gt-past-highlight: rgba(30, 41, 59, 0.3);
    --gt-hover-glow: rgba(148, 163, 184, 0.2);
    --gt-proximity-line: 148, 163, 184;
}

/* Light theme overrides (ROK-124) */
[data-scheme="light"] {
    --color-backdrop: #f8fafc;
    --color-surface: #ffffff;
    --color-panel: #f1f5f9;
    --color-overlay: #e2e8f0;
    --color-faint: #cbd5e1;
    --color-dim: #94a3b8;
    --color-muted: #64748b;
    --color-secondary: #475569;
    --color-foreground: #0f172a;
    --color-edge: #e2e8f0;
    --color-edge-strong: #cbd5e1;
    --color-edge-subtle: #f1f5f9;

    /* Game Time Grid inline-style tokens */
    --gt-widget-bg: rgba(241, 245, 249, 0.9);
    --gt-widget-border: rgba(203, 213, 225, 0.6);
    --gt-split-bg: rgba(226, 232, 240, 0.4);
    --gt-past-highlight: rgba(203, 213, 225, 0.3);
    --gt-hover-glow: rgba(100, 116, 139, 0.15);
    --gt-proximity-line: 100, 116, 139;
}

/* Space theme overrides (ROK-228) */
[data-scheme="space"] {
    --color-backdrop: #0a0a1a;
    --color-surface: #12122a;
    --color-panel: #1a1a3e;
    --color-overlay: #252550;
    --color-faint: #3d3d6b;
    --color-dim: #6b6b9e;
    --color-muted: #9898c8;
    --color-secondary: #c0c0e0;
    --color-foreground: #e8e8ff;
    --color-edge: #2d2a66;
    --color-edge-strong: #45408a;
    --color-edge-subtle: #1e1a4a;

    /* Game Time Grid inline-style tokens */
    --gt-widget-bg: rgba(26, 26, 62, 0.7);
    --gt-widget-border: rgba(61, 61, 107, 0.6);
    --gt-split-bg: rgba(26, 26, 62, 0.8);
    --gt-past-highlight: rgba(26, 26, 62, 0.3);
    --gt-hover-glow: rgba(152, 152, 200, 0.2);
    --gt-proximity-line: 152, 152, 200;
}

/* ============================================
   UX Design System - Raid Ledger
   Based on ux-design-specification.md
   ============================================ */

:root {
    /* Class/Role Colors (MMO Standard) */
    --color-tank: #C79C6E;
    --color-healer: #F58CBA;
    --color-dps-melee: #ABD473;
    --color-dps-ranged: #3FC7EB;

    /* Rarity Scale (Loot Colors) */
    --color-legendary: #FF8000;
    --color-epic: #A335EE;
    --color-rare: #0070DD;
    --color-uncommon: #1EFF00;
    --color-poor: #9D9D9D;

    /* Status Colors */
    --color-ready: #22C55E;
    --color-late: #EAB308;
    --color-absent: #EF4444;

    /* Glow Effects */
    --glow-emerald: 0 0 20px rgba(16, 185, 129, 0.4);
    --glow-indigo: 0 0 20px rgba(99, 102, 241, 0.4);
    --glow-epic: 0 0 20px rgba(163, 53, 238, 0.4);
}

/* Base Styles */
html {
    color-scheme: dark;
}

html[data-scheme="light"] {
    color-scheme: light;
}

html[data-scheme="space"] {
    color-scheme: dark;
}

body {
    margin: 0;
    min-height: 100vh;
    background-color: var(--color-backdrop);
    font-family: 'Inter', system-ui, sans-serif;
}

#root {
    min-height: 100vh;
}

/* Typography - Display/Headers */
.font-display {
    font-family: 'Cinzel', serif;
    letter-spacing: 0.02em;
}

/* Glassmorphism Card */
.glass-card {
    background: color-mix(in srgb, var(--color-surface) 70%, transparent);
    backdrop-filter: blur(12px);
    border: 1px solid color-mix(in srgb, var(--color-muted) 10%, transparent);
}

.glass-card:hover {
    border-color: color-mix(in srgb, var(--color-muted) 20%, transparent);
    background: color-mix(in srgb, var(--color-surface) 80%, transparent);
}

/* Light mode glass-card: opaque with subtle shadow */
[data-scheme="light"] .glass-card {
    background: color-mix(in srgb, var(--color-surface) 90%, transparent);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

[data-scheme="light"] .glass-card:hover {
    background: color-mix(in srgb, var(--color-surface) 95%, transparent);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

/* Space theme: glassmorphism with nebula tint (ROK-228) */
[data-scheme="space"] .glass-card {
    background: color-mix(in srgb, var(--color-surface) 65%, transparent);
    backdrop-filter: blur(16px);
    border-color: color-mix(in srgb, #8b5cf6 15%, transparent);
    box-shadow:
        0 0 1px rgba(139, 92, 246, 0.15),
        inset 0 0 20px rgba(139, 92, 246, 0.03);
}

[data-scheme="space"] .glass-card:hover {
    border-color: color-mix(in srgb, #8b5cf6 25%, transparent);
    background: color-mix(in srgb, var(--color-surface) 75%, transparent);
    box-shadow:
        0 0 2px rgba(139, 92, 246, 0.2),
        inset 0 0 25px rgba(139, 92, 246, 0.05);
}

/* Glow Button Effects */
.glow-emerald {
    box-shadow: var(--glow-emerald);
}

.glow-emerald:hover {
    box-shadow: 0 0 30px rgba(16, 185, 129, 0.5);
}

.glow-indigo {
    box-shadow: var(--glow-indigo);
}

.glow-indigo:hover {
    box-shadow: 0 0 30px rgba(99, 102, 241, 0.5);
}

/* Light mode: reduced glows */
[data-scheme="light"] .glow-emerald {
    box-shadow: 0 0 10px rgba(16, 185, 129, 0.2);
}

[data-scheme="light"] .glow-emerald:hover {
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
}

[data-scheme="light"] .glow-indigo {
    box-shadow: 0 0 10px rgba(99, 102, 241, 0.2);
}

[data-scheme="light"] .glow-indigo:hover {
    box-shadow: 0 0 15px rgba(99, 102, 241, 0.3);
}

/* Space theme: enhanced purple-cyan glows (ROK-228) */
[data-scheme="space"] .glow-emerald {
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.35), 0 0 40px rgba(139, 92, 246, 0.1);
}

[data-scheme="space"] .glow-emerald:hover {
    box-shadow: 0 0 30px rgba(16, 185, 129, 0.5), 0 0 50px rgba(139, 92, 246, 0.15);
}

[data-scheme="space"] .glow-indigo {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.35), 0 0 40px rgba(139, 92, 246, 0.15);
}

[data-scheme="space"] .glow-indigo:hover {
    box-shadow: 0 0 30px rgba(99, 102, 241, 0.5), 0 0 50px rgba(139, 92, 246, 0.2);
}

/* Role Badge Colors */
.role-tank {
    color: var(--color-tank);
    border-color: var(--color-tank);
}

.role-healer {
    color: var(--color-healer);
    border-color: var(--color-healer);
}

.role-dps {
    color: var(--color-dps-melee);
    border-color: var(--color-dps-melee);
}

/* Rarity Badges */
.rarity-legendary {
    color: var(--color-legendary);
    text-shadow: 0 0 10px var(--color-legendary);
}

.rarity-epic {
    color: var(--color-epic);
    text-shadow: 0 0 10px var(--color-epic);
}

.rarity-rare {
    color: var(--color-rare);
}

/* Smooth transitions */
* {
    transition-property: color, background-color, border-color, box-shadow, opacity, transform;
    transition-duration: 150ms;
    transition-timing-function: ease-out;
}

/* ============================================
   Space Theme — Neon Border Effects (ROK-228)
   Sci-fi inspired cyan/purple/magenta glow on
   edges, panels, inputs, and interactive elements.
   pointer-events: none on pseudo-elements.
   ============================================ */

[data-scheme="space"] {
    --neon-cyan: rgba(56, 189, 248, 0.4);
    --neon-purple: rgba(139, 92, 246, 0.35);
    --neon-magenta: rgba(217, 70, 239, 0.3);
}

/* Panel / card neon border glow */
[data-scheme="space"] .bg-surface,
[data-scheme="space"] .glass-card {
    box-shadow:
        0 0 1px var(--neon-purple),
        inset 0 0 15px rgba(139, 92, 246, 0.03);
}

/* Stronger glow on explicit bordered panels */
[data-scheme="space"] .border-edge,
[data-scheme="space"] .border-edge-subtle {
    border-color: rgba(139, 92, 246, 0.25);
}

[data-scheme="space"] .border-edge-strong {
    border-color: rgba(139, 92, 246, 0.35);
}

/* Rounded cards get a subtle outer neon glow */
[data-scheme="space"] .rounded-xl {
    box-shadow:
        0 0 2px rgba(139, 92, 246, 0.2),
        0 0 8px rgba(56, 189, 248, 0.06);
}

/* Primary action buttons: emerald with cyan accent */
[data-scheme="space"] .bg-emerald-600 {
    box-shadow:
        0 0 12px rgba(16, 185, 129, 0.3),
        0 0 20px rgba(56, 189, 248, 0.1);
}

[data-scheme="space"] .bg-emerald-600:hover {
    box-shadow:
        0 0 16px rgba(16, 185, 129, 0.45),
        0 0 30px rgba(56, 189, 248, 0.15);
}

/* Indigo buttons: purple+magenta accent */
[data-scheme="space"] .bg-indigo-600 {
    box-shadow:
        0 0 12px rgba(99, 102, 241, 0.3),
        0 0 20px rgba(217, 70, 239, 0.1);
}

[data-scheme="space"] .bg-indigo-600:hover {
    box-shadow:
        0 0 16px rgba(99, 102, 241, 0.45),
        0 0 30px rgba(217, 70, 239, 0.15);
}

/* Header bar */
[data-scheme="space"] header {
    border-bottom-color: rgba(139, 92, 246, 0.2);
    box-shadow: 0 1px 8px rgba(139, 92, 246, 0.1);
}

/* Form inputs get a subtle neon focus ring */
[data-scheme="space"] input:focus,
[data-scheme="space"] select:focus,
[data-scheme="space"] textarea:focus {
    box-shadow:
        0 0 0 2px rgba(139, 92, 246, 0.25),
        0 0 8px rgba(56, 189, 248, 0.1);
}

/* Dividers / horizontal rules */
[data-scheme="space"] hr,
[data-scheme="space"] .divide-edge > :not(:first-child) {
    border-color: rgba(139, 92, 246, 0.15);
}

/* Links: subtle cyan underline glow on hover */
[data-scheme="space"] a:hover {
    text-shadow: 0 0 6px rgba(56, 189, 248, 0.3);
}

/* Scrollbar — thin neon track */
[data-scheme="space"] ::-webkit-scrollbar {
    width: 6px;
}

[data-scheme="space"] ::-webkit-scrollbar-track {
    background: rgba(10, 10, 26, 0.5);
}

[data-scheme="space"] ::-webkit-scrollbar-thumb {
    background: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

[data-scheme="space"] ::-webkit-scrollbar-thumb:hover {
    background: rgba(139, 92, 246, 0.5);
}

/* ============================================
   Quest Log Theme — Parchment & Scroll (ROK-291)
   Light sub-theme using data-variant="quest-log"
   on top of data-scheme="light". Inherits all
   existing [data-scheme="light"] rules.
   ============================================ */

[data-variant="quest-log"] {
    --color-backdrop: #f4e8c1;
    --color-surface: #faf3e0;
    --color-panel: #f0e4c8;
    --color-overlay: #e8d8b0;
    --color-faint: #c9b896;
    --color-dim: #a89070;
    --color-muted: #8b7355;
    --color-secondary: #5c4a32;
    --color-foreground: #2c1810;
    --color-edge: #d4c4a0;
    --color-edge-strong: #c9b896;
    --color-edge-subtle: #e8dcc0;
    --gt-widget-bg: rgba(240, 228, 200, 0.9);
    --gt-widget-border: rgba(201, 184, 150, 0.6);
    --gt-split-bg: rgba(232, 216, 176, 0.4);
    --gt-past-highlight: rgba(201, 184, 150, 0.3);
    --gt-hover-glow: rgba(139, 115, 85, 0.15);
    --gt-proximity-line: 139, 115, 85;
    --ql-gold: #c9a84c;
    --ql-gold-hover: #b8952f;
    --ql-gold-glow: rgba(201, 168, 76, 0.3);
    --ql-ink: #2c1810;
    --ql-ink-secondary: #5c4a32;
    --ql-parchment-edge: #c4a86c;
    --ql-seal-red: #8b2020;
}

[data-variant="quest-log"] h1,
[data-variant="quest-log"] h2,
[data-variant="quest-log"] h3 {
    font-family: 'Uncial Antiqua', 'Cinzel', serif;
    color: var(--ql-ink);
}

[data-variant="quest-log"] .font-display {
    font-family: 'Uncial Antiqua', 'Cinzel', serif;
    letter-spacing: 0.03em;
}

[data-variant="quest-log"] body {
    font-family: 'MedievalSharp', 'Cinzel', serif;
    background-color: var(--color-backdrop);
    background-image:
        radial-gradient(ellipse at 20% 50%, rgba(201, 168, 76, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 20%, rgba(139, 115, 85, 0.06) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 80%, rgba(201, 168, 76, 0.05) 0%, transparent 50%);
}

[data-variant="quest-log"] body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    opacity: 0.03;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
    background-repeat: repeat;
}

/* --- Cards: layered parchment pages with stacked-paper shadows --- */
[data-variant="quest-log"] .glass-card {
    background: var(--color-surface);
    backdrop-filter: none;
    border: 2px solid var(--ql-parchment-edge);
    border-radius: 2px;
    position: relative;
    box-shadow:
        /* main warm drop shadow */
        0 2px 8px rgba(92, 74, 50, 0.15),
        /* inner top highlight (parchment sheen) */
        inset 0 1px 0 rgba(255, 255, 255, 0.5),
        /* stacked page layer 1 */
        2px 2px 0 0 var(--color-panel),
        2px 2px 0 1px var(--ql-parchment-edge),
        /* stacked page layer 2 */
        4px 4px 0 0 var(--color-edge-subtle),
        4px 4px 0 1px rgba(196, 168, 108, 0.5);
}

[data-variant="quest-log"] .glass-card:hover {
    background: var(--color-surface);
    border-color: var(--ql-gold);
    box-shadow:
        0 4px 14px rgba(92, 74, 50, 0.22),
        inset 0 1px 0 rgba(255, 255, 255, 0.6),
        2px 2px 0 0 var(--color-panel),
        2px 2px 0 1px var(--ql-gold),
        4px 4px 0 0 var(--color-edge-subtle),
        4px 4px 0 1px rgba(201, 168, 76, 0.6);
}

/* Cards with bg-panel (IntegrationCard, admin cards) get the same parchment treatment */
[data-variant="quest-log"] .bg-panel\/50,
[data-variant="quest-log"] [class*="bg-panel"] {
    background: var(--color-surface) !important;
    border-color: var(--ql-parchment-edge) !important;
    box-shadow:
        0 2px 8px rgba(92, 74, 50, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.4),
        2px 2px 0 0 var(--color-panel),
        2px 2px 0 1px var(--ql-parchment-edge);
}

[data-variant="quest-log"] .rounded-xl {
    border-radius: 4px;
    box-shadow:
        0 2px 6px rgba(92, 74, 50, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.35),
        2px 2px 0 0 var(--color-panel),
        2px 2px 0 1px rgba(196, 168, 108, 0.4);
}

/* --- Buttons: fantasy embossed leather/gold aesthetic --- */
[data-variant="quest-log"] .bg-emerald-600 {
    background: linear-gradient(
        180deg,
        #d4b45c 0%,
        var(--ql-gold) 40%,
        var(--ql-gold-hover) 100%
    ) !important;
    color: var(--ql-ink) !important;
    border: 1px solid #8b6914;
    box-shadow:
        /* outer warm glow */
        0 2px 8px var(--ql-gold-glow),
        /* bevel highlight (top) */
        inset 0 1px 0 rgba(255, 230, 140, 0.6),
        /* bevel shadow (bottom) */
        inset 0 -1px 0 rgba(92, 64, 10, 0.3);
    font-family: 'MedievalSharp', serif;
    text-shadow: 0 1px 0 rgba(255, 230, 140, 0.4);
    letter-spacing: 0.03em;
}

[data-variant="quest-log"] .bg-emerald-600:hover {
    background: linear-gradient(
        180deg,
        #dfc066 0%,
        #d4b45c 40%,
        var(--ql-gold) 100%
    ) !important;
    box-shadow:
        0 3px 12px rgba(201, 168, 76, 0.45),
        inset 0 1px 0 rgba(255, 230, 140, 0.7),
        inset 0 -1px 0 rgba(92, 64, 10, 0.25);
}

[data-variant="quest-log"] .bg-emerald-600:active {
    background: linear-gradient(
        180deg,
        var(--ql-gold-hover) 0%,
        var(--ql-gold) 100%
    ) !important;
    box-shadow:
        inset 0 2px 3px rgba(92, 64, 10, 0.3),
        0 1px 4px var(--ql-gold-glow);
}

/* Secondary / overlay buttons: leather-toned */
[data-variant="quest-log"] button:not(.bg-emerald-600):not([class*="bg-red"]):not([class*="bg-indigo"]) {
    font-family: 'MedievalSharp', serif;
}

/* Indigo buttons: wax-seal red tones */
[data-variant="quest-log"] .bg-indigo-600 {
    background: linear-gradient(
        180deg,
        #a02828 0%,
        var(--ql-seal-red) 50%,
        #6b1515 100%
    ) !important;
    color: #faf3e0 !important;
    border: 1px solid #5a1010;
    box-shadow:
        0 2px 8px rgba(139, 32, 32, 0.3),
        inset 0 1px 0 rgba(255, 120, 120, 0.25),
        inset 0 -1px 0 rgba(50, 10, 10, 0.3);
    font-family: 'MedievalSharp', serif;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
}

[data-variant="quest-log"] .bg-indigo-600:hover {
    background: linear-gradient(
        180deg,
        #b03030 0%,
        #a02828 50%,
        var(--ql-seal-red) 100%
    ) !important;
    box-shadow:
        0 3px 12px rgba(139, 32, 32, 0.4),
        inset 0 1px 0 rgba(255, 120, 120, 0.3),
        inset 0 -1px 0 rgba(50, 10, 10, 0.25);
}

[data-variant="quest-log"] .bg-indigo-600:active {
    background: linear-gradient(
        180deg,
        var(--ql-seal-red) 0%,
        #6b1515 100%
    ) !important;
    box-shadow:
        inset 0 2px 3px rgba(50, 10, 10, 0.4),
        0 1px 4px rgba(139, 32, 32, 0.2);
}

[data-variant="quest-log"] .text-emerald-500,
[data-variant="quest-log"] .text-emerald-400 {
    color: var(--ql-gold) !important;
}

[data-variant="quest-log"] .border-emerald-500 {
    border-color: var(--ql-gold) !important;
}

[data-variant="quest-log"] .glow-emerald {
    box-shadow: 0 0 10px rgba(201, 168, 76, 0.2);
}

[data-variant="quest-log"] .glow-emerald:hover {
    box-shadow: 0 0 15px rgba(201, 168, 76, 0.3);
}

[data-variant="quest-log"] .glow-indigo {
    box-shadow: 0 0 10px rgba(139, 32, 32, 0.15);
}

[data-variant="quest-log"] .glow-indigo:hover {
    box-shadow: 0 0 15px rgba(139, 32, 32, 0.25);
}

[data-variant="quest-log"] header {
    background: linear-gradient(180deg, rgba(196, 168, 108, 0.15) 0%, transparent 100%);
    border-bottom: 2px solid var(--ql-parchment-edge) !important;
    box-shadow: 0 2px 8px rgba(92, 74, 50, 0.1);
}

[data-variant="quest-log"] input,
[data-variant="quest-log"] select,
[data-variant="quest-log"] textarea {
    font-family: 'MedievalSharp', serif;
    background-color: rgba(250, 243, 224, 0.8);
    border-color: var(--color-edge);
}

[data-variant="quest-log"] input:focus,
[data-variant="quest-log"] select:focus,
[data-variant="quest-log"] textarea:focus {
    box-shadow: 0 0 0 2px rgba(201, 168, 76, 0.25), 0 0 8px rgba(201, 168, 76, 0.1);
    border-color: var(--ql-gold);
}

/* --- Sidebar navigation: book table of contents --- */
[data-variant="quest-log"] nav[aria-label*="navigation"],
[data-variant="quest-log"] nav[aria-label*="settings"] {
    font-family: 'MedievalSharp', serif;
    background:
        linear-gradient(90deg, rgba(196, 168, 108, 0.08) 0%, transparent 60%);
    border-right: 2px solid var(--ql-parchment-edge);
    padding-right: 0.75rem;
}

/* Chapter headings (section labels) — ornate book chapter feel */
[data-variant="quest-log"] nav .text-xs.font-semibold.uppercase {
    font-family: 'Uncial Antiqua', 'Cinzel', serif;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    font-size: 0.7rem;
    color: var(--ql-ink);
    border-bottom: 1px solid var(--ql-parchment-edge);
    padding-bottom: 0.35rem;
}

/* Nav entries — book TOC items with dot leaders */
[data-variant="quest-log"] nav a {
    border-left: none;
    border-radius: 0 !important;
    border-bottom: 1px dotted rgba(196, 168, 108, 0.35);
    padding-left: 1rem;
    position: relative;
    transition: color 0.15s, background-color 0.15s;
    background: transparent;
}

/* Indent marker — en-dash before each entry */
[data-variant="quest-log"] nav a .truncate::before {
    content: '\2013\00a0';
    color: var(--ql-parchment-edge);
    font-weight: normal;
}

[data-variant="quest-log"] nav a:hover {
    text-shadow: none;
    color: var(--ql-ink);
    background: rgba(201, 168, 76, 0.08);
    border-bottom-color: var(--ql-gold);
}

/* Active TOC entry — gold accent with warm highlight */
[data-variant="quest-log"] nav a.text-emerald-400,
[data-variant="quest-log"] nav a[class*="text-emerald-400"] {
    color: var(--ql-ink) !important;
    font-weight: 600;
    background: rgba(201, 168, 76, 0.12) !important;
    border-bottom: 1px solid var(--ql-gold);
    border-left: 3px solid var(--ql-gold);
    padding-left: calc(1rem - 3px);
}

/* Generic nav element fallback */
[data-variant="quest-log"] nav {
    font-family: 'MedievalSharp', serif;
}

[data-variant="quest-log"] hr {
    border-color: var(--ql-parchment-edge);
    border-style: dashed;
}

[data-variant="quest-log"] a:hover {
    text-shadow: none;
    color: var(--ql-gold-hover);
}

/* --- Collapsible sections: unfurling scrolls with scroll-cap decorations --- */
[data-variant="quest-log"] details {
    border: none;
    border-left: 2px solid var(--ql-parchment-edge);
    border-right: 2px solid var(--ql-parchment-edge);
    border-radius: 0;
    background: var(--color-surface);
    overflow: visible;
    position: relative;
    margin-top: 12px;
    margin-bottom: 12px;
}

/* Top scroll-cap: rolled parchment edge */
[data-variant="quest-log"] details::before {
    content: '';
    display: block;
    position: relative;
    height: 10px;
    background: linear-gradient(
        180deg,
        #c4a86c 0%,
        #d4b87c 30%,
        #e8d8b0 50%,
        #d4b87c 70%,
        #b89850 100%
    );
    border: 1px solid #a08040;
    border-bottom: none;
    border-radius: 6px 6px 0 0;
    box-shadow:
        0 2px 4px rgba(92, 74, 50, 0.2),
        inset 0 1px 0 rgba(255, 240, 200, 0.5),
        inset 0 -1px 0 rgba(92, 64, 10, 0.15);
}

/* Bottom scroll-cap: rolled parchment edge */
[data-variant="quest-log"] details::after {
    content: '';
    display: block;
    position: relative;
    height: 10px;
    background: linear-gradient(
        180deg,
        #b89850 0%,
        #d4b87c 30%,
        #e8d8b0 50%,
        #d4b87c 70%,
        #c4a86c 100%
    );
    border: 1px solid #a08040;
    border-top: none;
    border-radius: 0 0 6px 6px;
    box-shadow:
        0 2px 4px rgba(92, 74, 50, 0.15),
        inset 0 1px 0 rgba(255, 240, 200, 0.3),
        inset 0 -1px 0 rgba(92, 64, 10, 0.2);
}

/* Collapsed: compress the body to look like a rolled scroll */
[data-variant="quest-log"] details:not([open]) {
    background: linear-gradient(
        180deg,
        var(--color-surface) 0%,
        #ede0b8 50%,
        var(--color-surface) 100%
    );
}

[data-variant="quest-log"] details > summary {
    font-family: 'MedievalSharp', serif;
    cursor: pointer;
    padding: 0.75rem 1rem;
    background: linear-gradient(
        180deg,
        rgba(232, 216, 176, 0.3) 0%,
        transparent 100%
    );
    border-bottom: 1px solid var(--color-edge);
    list-style: none;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    position: relative;
    z-index: 1;
}

[data-variant="quest-log"] details > summary::-webkit-details-marker {
    display: none;
}

[data-variant="quest-log"] details > summary::before {
    content: '\25B6';
    font-size: 0.7em;
    color: var(--ql-gold);
    transition: transform 0.2s;
    display: inline-block;
}

[data-variant="quest-log"] details[open] > summary::before {
    transform: rotate(90deg);
}

[data-variant="quest-log"] details[open] > summary {
    border-bottom: 1px dashed var(--ql-parchment-edge);
}

/* Open scroll body: parchment interior */
[data-variant="quest-log"] details[open] {
    background: var(--color-surface);
    box-shadow: 0 1px 6px rgba(92, 74, 50, 0.1);
}

[data-variant="quest-log"] ::-webkit-scrollbar { width: 8px; }
[data-variant="quest-log"] ::-webkit-scrollbar-track { background: rgba(244, 232, 193, 0.5); }
[data-variant="quest-log"] ::-webkit-scrollbar-thumb { background: var(--ql-parchment-edge); border-radius: 4px; }
[data-variant="quest-log"] ::-webkit-scrollbar-thumb:hover { background: var(--ql-gold); }

[data-variant="quest-log"] .border-t-emerald-500 {
    border-top-color: var(--ql-gold) !important;
}
